---
name: sa-labs-analyzer
root: ~/sonian/labs/analyzer
tmux_options: -2
pre: vagrant up
windows:
  - shell: git remote update
  - vm:
      layout: even-vertical
      panes:
        - foreman: vagrant ssh -- 'bash -l -c "cd /vagrant && bundle exec foreman start"'
        - console: vagrant ssh -- 'bash -l -c "cd /vagrant && bundle exec rails c"'
        - shell: vagrant ssh
  - editor: vim
  - ssh-web:
      layout: even-vertical
      panes:
        - production.log: ssh -t sonian-deploy@ec2-204-236-240-246.compute-1.amazonaws.com 'bash -l -c "less +F /mnt/var/www/sa-labs-analyzer/shared/log/production.log"'
        - console: ssh -t sonian-deploy@ec2-204-236-240-246.compute-1.amazonaws.com 'bash -l -c "cd /mnt/var/www/sa-labs-analyzer/current && RAILS_ENV=production bundle exec rails c"'
        - shell: ssh -t sonian-deploy@ec2-204-236-240-246.compute-1.amazonaws.com 'bash -l'
  - ssh-workers:
      layout: even-vertical
      panes:
        - sidekiq.log: ssh -t sonian-deploy@ec2-54-225-35-242.compute-1.amazonaws.com 'bash -l -c "less +F /mnt/var/www/sa-labs-analyzer/shared/log/sidekiq.log"'
        - caat-history.log: ssh -t sonian-deploy@ec2-54-225-35-242.compute-1.amazonaws.com 'bash -l -c "less +F /mnt/work/CAAT2/logs/caat-history.log"'
        - shell: ssh -t sonian-deploy@ec2-54-225-35-242.compute-1.amazonaws.com 'bash -l'
